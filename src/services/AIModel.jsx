import { GoogleGenerativeAI } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
    systemInstruction: "Generate a Travel Plan for Location: Las Vegas, for 3 Days for a Couple with a Cheap Budget. Include a list of hotel options with the following details: HotelName, Hotel address, Price(in rupees), hotel image URL, geo coordinates, rating, and description. For the itinerary, provide day-wise plans in JSON format. For each day, suggest places to visit with the following fields: placeName, placeDetails, placeImageUrl, geoCoordinates, ticketPricing, travel time between locations, best time to visit, and the exact time range during the day for visiting each place (e.g., '8:00 to 10:00')."
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {
              text: "Generate a travel plan for the location: Las Vegas, for 3 days for a couple with a cheap budget. Return the result in JSON format. Include:\n\n1. A hotel options list with: hotelName, hotelAddress, price(in rupees), hotelImageUrl, geoCoordinates, rating, and description.\n2. A 3-day itinerary. For each day, provide a list of places with:\n  - placeName\n  - placeDetails\n  - placeImageUrl\n  - geoCoordinates\n  - ticketPricing\n  - bestTimeToVisit\n  - timeToTravel\n  - timeToSpend\n  - **visitTime (e.g., '08:00 to 10:00')** — a specific time range to visit that place."
            },
          ],
        },
        {
          role: "model",
          parts: [
        {text: "Okay, here's a JSON-formatted travel plan for a 3-day budget-friendly trip to Las Vegas for a couple. I've focused on free or low-cost activities, affordable dining options, and budget-friendly hotels.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"budget\": \"Cheap\",\n    \"travelers\": \"Couple\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"₹30 - ₹60 per night (estimated)\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/b4/83/7a/circus-circus-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1263,\n        \"longitude\": -115.1658\n      },\n      \"rating\": 3.0,\n      \"description\": \"Affordable option on the Strip. Features a circus, Adventuredome theme park (extra cost), and various dining options.  Rooms are basic but clean. Great for budget travelers who want to be on the Strip.\"\n    },\n    {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"₹40 - ₹70 per night (estimated)\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/e1/4c/a8/the-strat-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1472,\n        \"longitude\": -115.1575\n      },\n      \"rating\": 3.5,\n      \"description\": \"Located at the north end of the Strip. Offers great views from the Stratosphere Tower (extra cost).  Rooms are decent, and the price is often lower than mid-Strip hotels. Good for those willing to be a bit further from the center.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"₹45 - ₹75 per night (estimated)\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/3f/2b/71/excalibur-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0985,\n        \"longitude\": -115.1744\n      },\n      \"rating\": 3.5,\n      \"description\": \"Medieval-themed hotel at the south end of the Strip.  Offers affordable rooms and several dining choices. Good for families and budget-conscious travelers.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip (South End) & Free Attractions\",\n      \"bestTimeToVisit\": \"Morning & Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign.  Take a photo op. Often crowded. Be prepared to wait in line for a photo.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Welcome_to_Las_Vegas_sign.jpg/1280px-Welcome_to_Las_Vegas_sign.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0828,\n            \"longitude\": -115.1732\n          },\n          \"ticketPricing\": \"Free\",\n   \"visitTime\": \"8:00am - 10:00am\",\n         \"timeToTravel\": \"15-20 minutes drive from mid-Strip hotels\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Beautiful, free botanical display that changes seasonally.\",\n          \"placeImageUrl\": \"https://www.wheretraveler.com/sites/default/files/images/Bellagio-Conservatory.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1761\n          },\n          \"ticketPricing\": \"Free\",\n   \"visitTime\": \"10:00am - 12:00pm\",\n       \"bestTimeToVisit\": \"Mid-morning or afternoon to avoid peak crowds.\",\n          \"timeToTravel\": \"15-20 minutes from Welcome Sign\",\n           \"timeToSpend\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Spectacular free fountain show set to music. Shows every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Free\",\n  \"visitTime\": \"2:00pm - 4:00pm\",\n        \"bestTimeToVisit\": \"Evening for the full experience\",\n          \"timeToTravel\": \"Walkable from the Conservatory\",\n           \"timeToSpend\": \"30-60 minutes\"\n        },\n        {\n          \"placeName\": \"Walk the Strip (South)\",\n          \"placeDetails\": \"Stroll along the Strip, taking in the sights and sounds. People-watch and enjoy the atmosphere. See the Venetian and Paris Hotels from outside.\",\n          \"placeImageUrl\": \"https://a.cdn-hotels.com/gdcs/production163/d1762/555a257a-ca17-4096-804f-52de795f845d.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1039,\n            \"longitude\": -115.1739\n          },\n          \"ticketPricing\": \"Free\",\n    \"visitTime\": \"4:00pm - 5:00pm\",\n        \"timeToSpend\": \"2-3 hours\",\n          \"bestTimeToVisit\": \"Late afternoon/Evening\"\n        },\n          {\n          \"placeName\": \"Dinner at In-N-Out Burger\",\n          \"placeDetails\": \"Classic and affordable West Coast burger chain.  A Vegas must-try on a budget.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Around ₹10-₹15 per person\",\n   \"visitTime\": \"8:00am - 10:00am\",\n         \"bestTimeToVisit\": \"Avoid peak dinner hours (6-8pm) for shorter lines.\",\n          \"timeToTravel\": \"Multiple locations on and off the Strip\",\n           \"timeToSpend\": \"1 hour\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas (Fremont Street) & More Free Fun\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show on a canopy screen, street performers, and casinos. Free to walk around.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n      \"visitTime\": \"8:00am - 10:00am\",\n        \"longitude\": -115.1422\n          },\n          \"ticketPricing\": \"Free (except for attractions like SlotZilla Zip Line)\",\n          \"timeToTravel\": \"20-30 minute drive from the Strip (consider ride-sharing or bus)\",\n          \"bestTimeToVisit\": \"Evening for the light shows (usually start at dusk)\",\n           \"timeToSpend\": \"3-4 hours\"\n        },\n        {\n          \"placeName\": \"Downtown Container Park\",\n          \"placeDetails\": \"Unique open-air shopping and entertainment venue built from shipping containers.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1673,\n            \"longitude\": -115.1403\n          },\n          \"ticketPricing\": \"Free to enter (activities and food cost extra)\",\n     \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToTravel\": \"Short walk from Fremont Street\",\n           \"timeToSpend\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"Gold and Silver Pawn Shop (Pawn Stars)\",\n          \"placeDetails\": \"Famous pawn shop featured on the TV show 'Pawn Stars'. Can be crowded.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1744,\n            \"longitude\": -115.1428\n          },\n          \"ticketPricing\": \"Free to enter.\",\n       \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToTravel\": \"10 minutes from Fremont\",\n           \"timeToSpend\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"Cheap Eats Downtown\",\n          \"placeDetails\": \"Explore affordable dining options downtown. Many casinos offer cheap eats.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1744,\n            \"longitude\": -115.1428\n          },\n          \"ticketPricing\": \"₹10-₹20 per person\",\n    \"visitTime\": \"8:00am - 10:00am\",\n       \"timeToSpend\": \"1-2 hours\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"High Roller Observation Wheel & Strip Exploration\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district leading to the High Roller.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1164,\n            \"longitude\": -115.1693\n          },\n          \"ticketPricing\": \"Free to walk around (attractions cost extra)\",\n     \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToTravel\": \"Walk or take the Monorail from other parts of the Strip\",\n           \"timeToSpend\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel (Optional)\",\n          \"placeDetails\": \"Giant Ferris wheel offering panoramic views of Las Vegas.  Consider going during happy hour for discounted drinks inside the cabins.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1696\n          },\n          \"ticketPricing\": \"₹25-₹40 per person (check for discounts online)\",\n      \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToSpend\": \"1 hour\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"Free volcano show in front of the Mirage hotel. Erupts nightly.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1212,\n            \"longitude\": -115.1753\n          },\n          \"ticketPricing\": \"Free\",\n    \"visitTime\": \"8:00am - 10:00am\",\n      \"bestTimeToVisit\": \"Nightly shows (check showtimes in advance)\",\n           \"timeToSpend\": \"30 minutes\",\n           \"timeToTravel\": \"Walk from The Linq (or take a short ride)\"\n        },\n        {\n          \"placeName\": \"Caesars Palace (Outside)\",\n          \"placeDetails\": \"Walk through Caesars Palace and see the impressive architecture and fountains. You can also see the Fall of Atlantis show (animatronic show).\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1162,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"Free to enter (shows may have a fee)\",\n      \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToSpend\": \"1-2 hours\",\n           \"timeToTravel\": \"Walk from The Mirage (or take a short ride)\"\n        },\n        {\n          \"placeName\": \"Budget-Friendly Dinner\",\n          \"placeDetails\": \"Explore options like food courts in casinos, or off-Strip restaurants for cheaper meals.\",\n          \"placeImageUrl\": \"https://www.casino.org/news/wp-content/uploads/2023/05/bellagio-fountains-las-vegas-nevada.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1162,\n            \"longitude\": -115.1763\n          },\n          \"ticketPricing\": \"₹10-₹20 per person\",\n      \"visitTime\": \"8:00am - 10:00am\",\n     \"timeToSpend\": \"1-2 hours\"\n        }\n      ]\n    }\n  },\n  \"notes\": [\n    \"Hotel prices are estimates and can vary based on season and availability. Book in advance for the best deals.\",\n    \"Consider purchasing a Monorail pass if you plan to travel frequently along the Strip.\",\n    \"Take advantage of free activities and attractions to stay within your budget.\",\n    \"Look for happy hour specials for affordable drinks and appetizers.\",\n    \"Pack comfortable shoes for walking.\",\n    \"Stay hydrated, especially during the hot summer months.\",\n    \"Compare ride-sharing services (Uber, Lyft) for the best prices.\"\n  ]\n}\n```\n\n**Explanation of Choices:**\n\n*   **Hotels:** I selected hotels known for being more budget-friendly while still offering reasonable amenities and locations. Circus Circus is the most budget-friendly, while Stratosphere offers potentially cheaper rates but is a bit further out. Excalibur provides a good balance of location and price.\n*   **Itinerary:**\n    *   **Day 1:** Focuses on the southern end of the Strip, hitting iconic free attractions like the Welcome to Las Vegas Sign, Bellagio Conservatory and Fountains.\n    *   **Day 2:**  A trip downtown to Fremont Street is essential. It's a different vibe than the Strip, and offers more budget-friendly entertainment and dining.\n    *   **Day 3:**  A mix of the LINQ Promenade, potentially the High Roller (if budget allows), and the Mirage Volcano, and free attractions at Ceasers Palace.\n*   **Food:** I suggested In-N-Out Burger, casino food courts, and exploring off-Strip options for cheaper meals.\n*   **Transportation:** Walking is key! I also suggest considering the Monorail for certain stretches of the Strip. Ride-sharing services are also an option but can add up.\n\n**Important Considerations:**\n\n*   **Pricing:** All prices are estimates. Check current prices and availability before booking. Hotel prices fluctuate greatly.\n*   **Flexibility:** This is a suggested itinerary. Feel free to adjust it based on your interests and energy levels.\n*   **Discounts:** Look for online discounts for attractions, shows, and dining.  Groupon and other deal sites can be helpful.\n*   **Weather:** Vegas can be extremely hot in the summer. Plan accordingly and stay hydrated.\n\nI hope this helps you plan your trip! Have a great time in Las Vegas!\n"},
          ],
        },
      ],
    });
  
 
  